### æ­å»ºä»¥å¤ªåŠç§æœ‰é“¾

#### 1ã€åŒºå—é“¾ç±»å‹

æ ¹æ®åŒºå—é“¾çš„ç½‘ç»œç±»å‹åˆ†ç±»ï¼Œç›®å‰åŒºå—é“¾ä¸»è¦åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼Œå³å…±æœ‰é“¾ã€ç§æœ‰é“¾å’Œè”ç›Ÿé“¾ã€‚

1ã€å…±æœ‰é“¾(Public Blockchain)ï¼šå¯¹æ‰€æœ‰äººå¼€æ”¾ï¼Œå„å‚ä¸è€…ï¼ˆå³èŠ‚ç‚¹ï¼‰å¯è‡ªç”±åŠ å…¥ä»¥åŠé€€å‡ºç½‘ç»œï¼Œæ‰€æœ‰æ•°æ®å…¬å¼€é€æ˜ï¼Œé€šå¸¸è¢«è®¤ä¸ºæ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„å®Œå…¨å»ä¸­å¿ƒåŒ–çš„åŒºå—é“¾ï¼Œå¦‚æ¯”ç‰¹å¸ã€ä»¥å¤ªåŠã€EOSç­‰ã€‚

å…±æœ‰é“¾åˆåˆ†ä¸ºä¸»ç½‘å’Œæµ‹è¯•ç½‘ç»œã€‚
ä¸»ç½‘ï¼ˆMainNetï¼‰ï¼šæ­£å¼ä¸Šçº¿çš„åŒºå—é“¾ç½‘è·¯ï¼Œä¸»ç½‘ä¸Šçº¿æ‰ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªçœŸæ­£çš„åŒºå—é“¾ã€‚
å¾ˆå¤šé¡¹ç›®éƒ½åœ¨ç­¹å¤‡ç€ä¸»ç½‘ä¸Šçº¿ï¼Œå¦‚IPFSã€EOSç­‰ï¼Œæ­£æ‰€è°“ä¸Šä¸»ç½‘å¿…å¤§æ¶¨ã€‚

æµ‹è¯•ç½‘ç»œï¼ˆTestNetï¼‰ï¼šä¸“é—¨ç»™ç”¨æˆ·ç”¨æ¥å¼€å‘ã€æµ‹è¯•å’Œè°ƒè¯•ç”¨çš„åŒºå—é“¾ç½‘ç»œã€‚
å¦‚åœ¨ä»¥å¤ªåŠå¹³å°ï¼Œç›®å‰åœ¨è¿è¡Œçš„æµ‹è¯•ç½‘ç»œæœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯Ropstenã€Kovanå’ŒRinkebyã€‚åœ¨æµ‹è¯•ç½‘ç»œï¼Œä»¥å¤ªå¸ä»·å€¼æ›´ä½ï¼Œä¹Ÿæ›´å®¹æ˜“å¾—åˆ°ã€‚

2ã€ç§æœ‰é“¾ï¼ˆPrivate Blockchainï¼‰ï¼šå†™å…¥æƒé™æœ‰ç”±æŸä¸ªç»„ç»‡æˆ–è€…æœºæ„å…¨æƒæ§åˆ¶ï¼Œå‚ä¸èŠ‚ç‚¹çš„èµ„æ ¼ä¼šè¢«ä¸¥æ ¼é™åˆ¶ã€‚å‚ä¸çš„èŠ‚ç‚¹æœ‰é™å’Œå¯æ§ï¼Œå› æ­¤å…¶ä¸»è¦ç‰¹ç‚¹æ˜¯æå¿«çš„äº¤æ˜“é€Ÿåº¦ã€æ›´ä½çš„äº¤æ˜“æˆæœ¬ã€æ›´å¥½çš„éšç§ä¿æŠ¤ã€ä¸å®¹æ˜“è¢«æ¶æ„ç¯¡æ”¹ã€‚

3ã€è”ç›Ÿé“¾ï¼ˆConsortium Blockchainï¼‰ï¼šç”±è‹¥å¹²ä¸ªæœºæ„å…±åŒå‚ä¸ç®¡ç†ï¼Œè‹¥å¹²ä¸ªæœºæ„å…±åŒå‚ä¸ç®¡ç†ï¼Œæ¯ä¸ªæœºæ„éƒ½è¿è¡Œç€ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­çš„æ•°æ®åªå…è®¸ç³»ç»Ÿå†…ä¸åŒçš„æœºæ„è¿›è¡Œè¯»å†™å’Œå‘é€äº¤æ˜“ï¼Œå¹¶ä¸”å…±åŒæ¥è®°å½•äº¤æ˜“æ•°æ®ï¼Œå¦‚Hyperledgerã€R3 Cordaç­‰ã€‚

**æ³¨æ„ï¼šä»¥ä¸‹æ“ä½œå‡åœ¨MacOSä¸Šé¢æ“ä½œ**

#### 2ã€å®‰è£…å‰æ
åœ¨ç§æœ‰é“¾è¿›è¡Œå¼€å‘å’Œæµ‹è¯•ä¸éœ€è¦åŒæ­¥å…±æœ‰é“¾å¤§é‡çš„åŒºå—æ•°æ®ï¼Œä¹Ÿä¸éœ€è¦èŠ±é’±è´­ä¹°ä»¥å¤ªå¸ï¼Œå¯ä»¥é€šè¿‡æ¨¡æ‹ŸæŒ–çŸ¿è·å–ä»¥å¤ªå¸ã€‚

1ã€å®‰è£…Homebrewï¼š

```
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```

2ã€å®‰è£…Goï¼š

```
brew install go
```

æ£€æŸ¥å®‰è£…ç‰ˆæœ¬

```
wenzildeiMac:~ wenzil$ go version
go version go1.10.2 darwin/amd64
```

ä¸‹è½½Goä¹‹åï¼Œéœ€è¦é…ç½®ä¸‹ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œä¸ä½œæè¿°ã€‚

3ã€å®‰è£…Go-Ethereumå®¢æˆ·ç«¯ï¼ˆå®‰è£…Geth
æ–¹æ³•ä¸€ï¼Œæ¨èï¼‰ï¼š

gethæ˜¯ä»¥å¤ªåŠçš„å®˜æ–¹å®¢æˆ·ç«¯ï¼Œæä¾›å¾ˆå¤šå‘½ä»¤å’Œé€‰é¡¹ï¼Œå¯ä»¥è¿è¡Œä»¥å¤ªåŠèŠ‚ç‚¹ã€åˆ›å»ºå’Œç®¡ç†è´¦æˆ·ã€å‘é€äº¤æ˜“ã€æŒ–çŸ¿ã€éƒ¨ç½²æ™ºèƒ½åˆçº¦åˆ°åŒºå—é“¾ç­‰ã€‚

å®‰è£…å‘½ä»¤ï¼š

```
brew tap ethereum/ethereum
brew install ethereum
```

```
wenzildeiMac:private-chain-data wenzil$ brew tap ethereum/ethereum
Updating Homebrew...
==> Auto-updated Homebrew!
Updated 1 tap (homebrew/core).
==> New Formulae

##########æ­¤å¤„çœç•¥å¤šè¡Œè¾“å‡ºå†…å®¹##########
==> Tapping ethereum/ethereum
Cloning into '/usr/local/Homebrew/Library/Taps/ethereum/homebrew-ethereum'...
remote: Counting objects: 6, done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 6 (delta 1), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (6/6), done.
Tapped 3 formulae (32 files, 30.4KB)
wenzildeiMac:private-chain-data wenzil$ brew install ethereum  
Updating Homebrew...
==> Auto-updated Homebrew!
Updated 1 tap (homebrew/core).
==> Updated Formulae
hopenpgp-tools

==> Downloading https://homebrew.bintray.com/bottles/ethereum-1.8.10.high_

##########æ­¤å¤„çœç•¥å¤šè¡Œè¾“å‡ºå†…å®¹##########
==> Pouring ethereum-1.8.10.high_sierra.bottle.tar.gz
ğŸº  /usr/local/Cellar/ethereum/1.8.10: 18 files, 204MB

##########æ£€æŸ¥ç‰ˆæœ¬å·##########
wenzildeiMac:private-chain-data wenzil$ geth version
Geth
Version: 1.8.10-stable
Architecture: amd64
Protocol Versions: [63 62]
Network Id: 1
Go Version: go1.10.2
Operating System: darwin
GOPATH=/usr/local/Cellar/go/1.10.2
GOROOT=/usr/local/Cellar/go/1.10.2/libexec                     
```

4ã€å®‰è£…Gethå‘½ä»¤è¡Œå·¥å…·ï¼ˆå®‰è£…Gethæ–¹æ³•äºŒï¼Œæ¯”æ–¹æ³•ä¸€ç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼‰ï¼š

ä¹Ÿå¯ä»¥é€šè¿‡Githubä¸‹è½½æºç è¿›è¡Œç¼–è¯‘ï¼ŒGithubåœ°å€ï¼š

```
https://github.com/ethereum/go-ethereum.git
```

ä¸‹è½½æˆåŠŸåï¼Œéœ€è¦æ‰‹åŠ¨ç¼–è¯‘ï¼š

```
wenzildeiMac:go-ethereum wenzil$ pwd
/Users/wenzil/Desktop/study/go-ethereum
wenzildeiMac:go-ethereum wenzil$ make geth
build/env.sh go run build/ci.go install ./cmd/geth
>>> /usr/local/Cellar/go/1.10.2/libexec/bin/go install -ldflags -X main.gitCommit=1da33028ce88c4365d99471977098f4911fd38fa -s -v ./cmd/geth
github.com/ethereum/go-ethereum/common/hexutil
github.com/ethereum/go-ethereum/vendor/github.com/hashicorp/golang-lru/simplelru
##########æ­¤å¤„çœç•¥å¤šè¡Œè¾“å‡ºå†…å®¹##########
github.com/ethereum/go-ethereum/cmd/geth
Done building.
Run "/Users/wenzil/Desktop/study/go-ethereum/build/bin/geth" to launch geth.

wenzildeiMac:go-ethereum wenzil$ make all
build/env.sh go run build/ci.go install
>>> /usr/local/Cellar/go/1.10.2/libexec/bin/go install -ldflags -X main.gitCommit=1da
##########æ­¤å¤„çœç•¥å¤šè¡Œè¾“å‡ºå†…å®¹##########
github.com/ethereum/go-ethereum/whisper/shhclient
github.com/ethereum/go-ethereum/whisper/whisperv5

##########æ£€æŸ¥ç‰ˆæœ¬å·##########
wenzildeiMac:go-ethereum wenzil$ ./build/bin/geth version
Geth
Version: 1.8.7-unstable
Git Commit: 1da33028ce88c4365d99471977098f4911fd38fa
Architecture: amd64
Protocol Versions: [63 62]
Network Id: 1
Go Version: go1.10.2
Operating System: darwin
GOPATH=/usr/local/Cellar/go/1.10.2
GOROOT=/usr/local/Cellar/go/1.10.2/libexec
```

5ã€å®‰è£…Solidityç¼–è¯‘å™¨ï¼š
Solidityæ˜¯ä¸€ä¸ªé¢å‘åˆçº¦çš„é«˜çº§è¯­è¨€,å…¶è¯­æ³•ç±»ä¼¼äºJavaScriptï¼Œä»¥å¤ªåŠçš„æ™ºèƒ½åˆçº¦ä½¿ç”¨çš„æ˜¯Solidityè¯­è¨€ã€‚

```
wenzildeiMac:~ wenzil$ brew install solidity
==> Installing solidity from ethereum/ethereum
==> Installing dependencies for ethereum/ethereum/solidity: cmake, z3
==> Installing ethereum/ethereum/solidity dependency: cmake
==> Downloading https://homebrew.bintray.com/bottles/cmake-3.11.2.high_sierra.bo
######################################################################## 100.0%
==> Pouring cmake-3.11.2.high_sierra.bottle.tar.gz
##########æ­¤å¤„çœç•¥å¤šè¡Œè¾“å‡ºå†…å®¹##########
==> Downloading https://github.com/ethereum/solidity/releases/download/v0.4.24/s
==> Downloading from https://github-production-release-asset-2e65be.s3.amazonaws
######################################################################## 100.0%
==> cmake . -DCMAKE_C_FLAGS_RELEASE=-DNDEBUG -DCMAKE_CXX_FLAGS_RELEASE=-DNDEBUG 
==> make install
ğŸº  /usr/local/Cellar/solidity/0.4.24: 6 files, 5.5MB, built in 3 minutes 33 seconds
```

æ³¨æ„ï¼šä¸‹è½½å’Œå®‰è£…æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥ä¼šå¤±è´¥ï¼Œé‡æ–°æ‰§è¡Œ"brew install solidity"å‘½ä»¤å³å¯ã€‚

#### 3ã€åˆ›å»ºç§æœ‰é“¾ç½‘ç»œ

ä¸€èˆ¬æ¥è¯´ï¼Œéƒ½æ˜¯ä¸åŒçš„ç”µè„‘ï¼ˆèŠ‚ç‚¹ï¼‰ç»„æˆç§æœ‰é“¾ã€‚è¿™é‡Œä¸ºäº†æ–¹ä¾¿ï¼Œæ¼”ç¤ºå¦‚ä½•åœ¨åŒä¸€å°ç”µè„‘æ­å»ºä»¥å¤ªåŠç§æœ‰é“¾ç½‘ç»œã€‚

1ã€åˆ›å»ºç”¨äºä¿å­˜ç§æœ‰é“¾æ•°æ®çš„æ–‡ä»¶å¤¹

```
wenzildeiMac:go-ethereum wenzil$ pwd
/Users/wenzil/Desktop/study/go-ethereum
wenzildeiMac:go-ethereum wenzil$ cd ..
wenzildeiMac:study wenzil$ pwd
/Users/wenzil/Desktop/study
wenzildeiMac:study wenzil$ mkdir private-chain-data
wenzildeiMac:study wenzil$ cd private-chain-data/
```

2ã€ä½¿ç”¨gethå‘½ä»¤å¯åŠ¨ç§æœ‰é“¾èŠ‚ç‚¹ï¼š

```
geth --networkid 1024 --dev --datadir data1 --rpc --rpcaddr 192.168.xxx.xxx --rpcport 8989 --port 3000

--identityï¼šæŒ‡å®šèŠ‚ç‚¹ IDï¼›
--rpcï¼šè¡¨ç¤ºå¼€å¯ HTTP-RPC æœåŠ¡ï¼›
--rpcaddrï¼šHTTP-RPC æœåŠ¡ipåœ°å€ï¼›
--rpcportï¼šæŒ‡å®š HTTP-RPC æœåŠ¡ç›‘å¬ç«¯å£å·ï¼ˆé»˜è®¤ä¸º 8545ï¼‰ï¼›
--datadirï¼šæŒ‡å®šåŒºå—é“¾æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼›
--portï¼šæŒ‡å®šå’Œå…¶ä»–èŠ‚ç‚¹è¿æ¥æ‰€ç”¨çš„ç«¯å£å·ï¼ˆé»˜è®¤ä¸º 30303ï¼‰ï¼›
--nodiscoverï¼šå…³é—­èŠ‚ç‚¹å‘ç°æœºåˆ¶ï¼Œé˜²æ­¢åŠ å…¥æœ‰åŒæ ·åˆå§‹é…ç½®çš„é™Œç”ŸèŠ‚ç‚¹

192.168.xxx.xxxä¸ºå¯¹åº”çš„IPåœ°å€
```

3ã€åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š

```
geth --networkid 1024 --dev --datadir data1 --rpc --rpcaddr 192.168.1.100 --rpcport 8989 --port 3000
```

192.168.1.100ä¸ºæˆ‘æœ¬æœºçš„IPåœ°å€ã€‚

```
wenzildeiMac:private-chain-data wenzil$ geth --networkid 1024 --dev --datadir data1 --rpc --rpcaddr 192.168.1.100 --rpcport 8989 --port 3000
INFO [05-31|19:29:05] Maximum peer count                       ETH=25 LES=0 total=25
INFO [05-31|19:29:07] Using developer account                  address=0x84497a30D1f54E11D2bfE7bae56edb8144B6dd9D
INFO [05-31|19:29:07] Starting peer-to-peer node               instance=Geth/v1.8.10-stable/darwin-amd64/go1.10.2
INFO [05-31|19:29:07] Allocated cache and file handles         database=/Users/wenzil/Desktop/study/private-chain-data/data1/geth/chaindata cache=768 handles=128
INFO [05-31|19:29:07] Writing custom genesis block 
INFO [05-31|19:29:07] Persisted trie from memory database      nodes=11 size=2.17kB time=58.535Âµs gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B
INFO [05-31|19:29:07] Initialised chain configuration                    versions="[63 62]" network=123
##########æ­¤å¤„çœç•¥å¤šè¡Œè¾“å‡ºå†…å®¹##########INFO [05-31|16:29:07] Commit new mining work                   number=1 txs=0 uncles=0 elapsed=71.562Âµs
WARN [05-31|19:29:07] Block sealing failed                     err="waiting for transactions"

```

4ã€æ‰“å¼€"private-chain-data"æ–‡ä»¶å¤¹ï¼Œä¼šå‘ç°å¤šäº†å‡ ä¸ªæ–‡ä»¶ã€‚
![1.è¿è¡ŒèŠ‚ç‚¹è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶](media/15277728467358/1.%E8%BF%90%E8%A1%8C%E8%8A%82%E7%82%B9%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6.png)


#### 4ã€ä½¿ç”¨JavaScript Consoleäº¤äº’

å¯ä»¥è¿›å…¥JavaScript Consoleæ‰§è¡Œç¯å¢ƒï¼Œä½¿ç”¨é‡Œé¢çš„å†…ç½®å¯¹è±¡åšä¸€äº›æ“ä½œï¼Œè¿™äº›å†…ç½®å¯¹è±¡æä¾›çš„åŠŸèƒ½å¾ˆä¸°å¯Œï¼Œæ¯”å¦‚æŸ¥çœ‹åŒºå—å’Œäº¤æ˜“ã€åˆ›å»ºè´¦æˆ·ã€æŒ–çŸ¿ã€å‘é€äº¤æ˜“ã€éƒ¨ç½²æ™ºèƒ½åˆçº¦ç­‰ã€‚

```
geth attach ipc:<data1>/geth.ipc

ethï¼šåŒ…å«ä¸€äº›è·Ÿæ“ä½œåŒºå—é“¾ç›¸å…³çš„æ–¹æ³•ï¼›
netï¼šåŒ…å«ä¸€äº›æŸ¥çœ‹p2pç½‘ç»œçŠ¶æ€çš„æ–¹æ³•ï¼›
adminï¼šåŒ…å«ä¸€äº›ä¸ç®¡ç†èŠ‚ç‚¹ç›¸å…³çš„æ–¹æ³•ï¼›
minerï¼šåŒ…å«å¯åŠ¨&åœæ­¢æŒ–çŸ¿çš„ä¸€äº›æ–¹æ³•ï¼›
personalï¼šä¸»è¦åŒ…å«ä¸€äº›ç®¡ç†è´¦æˆ·çš„æ–¹æ³•ï¼›
txpoolï¼šåŒ…å«ä¸€äº›æŸ¥çœ‹äº¤æ˜“å†…å­˜æ± çš„æ–¹æ³•ï¼›
web3ï¼šåŒ…å«äº†ä»¥ä¸Šå¯¹è±¡ï¼Œè¿˜åŒ…å«ä¸€äº›å•ä½æ¢ç®—çš„æ–¹æ³•ã€‚
```


ä¿æŒç§æœ‰é“¾èŠ‚ç‚¹çš„è¿è¡Œï¼Œæ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œæ“ä½œå¦‚ä¸‹ï¼š

```
wenzildeiMac:~ wenzil$ geth attach ipc:/Users/wenzil/Desktop/study/private-chain-data/data1/geth.ipc
Welcome to the Geth JavaScript console!

instance: Geth/v1.8.10-stable/darwin-amd64/go1.10.2
coinbase: 0x84497a30d1f54e11d2bfe7bae56edb8144b6dd9d
at block: 0 (Thu, 01 Jan 1970 08:00:00 CST)
 datadir: /Users/wenzil/Desktop/study/private-chain-data/data1
 modules: admin:1.0 clique:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 shh:1.0 txpool:1.0 web3:1.0

> eth.accounts
["0x84497a30d1f54e11d2bfe7bae56edb8144b6dd9d"]
> personal.newAccount("wenzil")
"0xc81f9f0561a0820483ce9a9dec621bb6667dbfa6"
> personal.listAccounts
["0x84497a30d1f54e11d2bfe7bae56edb8144b6dd9d", "0xc81f9f0561a0820483ce9a9dec621bb6667dbfa6"]
> eth.accounts
["0x84497a30d1f54e11d2bfe7bae56edb8144b6dd9d", "0xc81f9f0561a0820483ce9a9dec621bb6667dbfa6"]
> web3.eth.coinbase
"0x84497a30d1f54e11d2bfe7bae56edb8144b6dd9d"
> personal.listAccounts[0]
"0x84497a30d1f54e11d2bfe7bae56edb8144b6dd9d"
> eth.getBalance(personal.listAccounts[0])
1.15792089237316195423570985008687907853269984665640564039457584007913129639927e+77
> eth.getBalance(personal.listAccounts[1])
0

> web3.fromWei(eth.getBalance(personal.listAccounts[0]).toNumber(), 'ether');
"115792089237316200000000000000000000000000000000000000000000"
> web3.fromWei(eth.getBalance(personal.listAccounts[1]).toNumber(), 'ether');
"0"

###å‘é€è½¬è´¦äº¤æ˜“ï¼Œè¿”å›äº¤æ˜“çš„å“ˆå¸Œ###
> sendEther = web3.toWei(5, 'ether');
> eth.sendTransaction({from: web3.eth.coinbase, to:personal.listAccounts[1], value:sendEther})
"0x70b014b7ded02aadb2e78c48e1ab8762694ffb82d0189e180b14318ec8455cd7"
###æŸ¥çœ‹äº¤æ˜“çš„çŠ¶æ€###
> txpool.status
{
  pending: 1,
  queued: 0
}
> miner.start()
null
> miner.stop()
true
> txpool.status

{
  pending: 0,
  queued: 0
}
###å‘ç°è½¬è´¦æˆåŠŸ###
> web3.fromWei(eth.getBalance(personal.listAccounts[1]).toNumber(), 'ether');
"5"
> eth.blockNumber
1
> eth.getTransaction("0x70b014b7ded02aadb2e78c48e1ab8762694ffb82d0189e180b14318ec8455cd7")
{
  blockHash: "0x07944f163f2bdb4f49ee870dd39175e2f1010ef4b8871eb3a3447916d186dee2",
  blockNumber: 1,
  from: "0x84497a30d1f54e11d2bfe7bae56edb8144b6dd9d",
  gas: 90000,
  gasPrice: 1,
  hash: "0x70b014b7ded02aadb2e78c48e1ab8762694ffb82d0189e180b14318ec8455cd7",
  input: "0x",
  nonce: 0,
  r: "0x2865f45643c43abd258c2fd12b2a3187d4ad98c4dfda9bd2804e92f78fd0c803",
  s: "0x4923415a88799ab3d3c7cf0d41bc2b9cedaa033c346cf41a229eff3703b1d7f8",
  to: "0xc81f9f0561a0820483ce9a9dec621bb6667dbfa6",
  transactionIndex: 0,
  v: "0xa96",
  value: 5000000000000000000
}
> eth.getBlock(1)
{
  difficulty: 2,
  extraData: "0xd98301080a846765746888676f312e31302e328664617277696e000000000000b3e4f8e50c4c8d1b9ccfda57ca557cf86b41220ffbefb38956621c6a716afb5547c7a4852494ee16ec0d9ff4f5352307659babdc8b5e57c604852c2c2a3a996301",
  gasLimit: 6277051,
  gasUsed: 21000,
  hash: "0x07944f163f2bdb4f49ee870dd39175e2f1010ef4b8871eb3a3447916d186dee2",
  logsBloom: "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
  miner: "0x0000000000000000000000000000000000000000",
  mixHash: "0x0000000000000000000000000000000000000000000000000000000000000000",
  nonce: "0x0000000000000000",
  number: 1,
  parentHash: "0x66bcc11d1680c2d52d09aa6f113d4306f089728598202467cbde72213f12a0ae",
  receiptsRoot: "0x056b23fbba480696b65fe5a59b8f2148a1299103c4f57df839233af2cf4ca2d2",
  sha3Uncles: "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
  size: 717,
  stateRoot: "0xf4c4362504f7b2eacff4ed57dc82f578f275ff49a6f644ddc4062b3b7a3cf935",
  timestamp: 1527759405,
  totalDifficulty: 3,
  transactions: ["0x70b014b7ded02aadb2e78c48e1ab8762694ffb82d0189e180b14318ec8455cd7"],
  transactionsRoot: "0x8c3c2e1e0a536874aafd9d40f09d1519c5537dceff0dbd28d9ba6118d37dea7b",
  uncles: []
}
> 
> miner.setEtherbase(eth.accounts[1])
true
> eth.getBalance(eth.coinbase)
5000000000000000000
> web3.fromWei(eth.getBalance(eth.coinbase))
5
```

å¯¹åº”å‘½ä»¤è¯´æ˜:

eth.accounts // æŸ¥è¯¢è´¦å·åˆ—è¡¨

personal.listAccounts //æŸ¥è¯¢è´¦å·åˆ—è¡¨

personal.newAccount("xxx") //æ–°å»ºè´¦å·ï¼Œxxxä¸ºè´¦æˆ·è´¦å·

web3.eth.coinbase // èŠ‚ç‚¹æŒ–çŸ¿çš„è´¦å·åœ°å€ï¼Œé»˜è®¤ä¸ºè´¦å·åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªè´¦å·

personal.listAccounts[0] // æŸ¥çœ‹è´¦å·åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªè´¦å·

eth.getBalance("xxx") //æŸ¥çœ‹å¯¹åº”è´¦å·çš„ä½™é¢ï¼Œxxxä¸ºè´¦å·åœ°å€

miner.start()       // å¼€å§‹æŒ–çŸ¿

miner.stop()        // åœæ­¢æŒ–çŸ¿

txpool.status       // æŸ¥çœ‹äº¤æ˜“çš„çŠ¶æ€

eth.blockNumber     // æŸ¥çœ‹äº¤æ˜“çš„åŒºå—å·

eth.getTransaction  // æŸ¥çœ‹äº¤æ˜“åŒºå—ä¿¡æ¯

eth.getBlock(xxx)    // æ ¹æ®åŒºå—å·æŸ¥çœ‹åŒºå—ä¿¡æ¯ï¼Œxxxä¸ºåŒºå—å·

miner.setEtherbase(xxx)    // è®¾ç½®æŒ–çŸ¿çš„è´¦å·ï¼Œxxxä¸ºè´¦å·åœ°å€

getBalance()     // è¿”å›å€¼çš„å•ä½æ˜¯weiï¼Œweiæ˜¯ä»¥å¤ªå¸çš„æœ€å°å•ä½ï¼Œ1ä¸ªä»¥å¤ªå¸=10çš„18æ¬¡æ–¹ä¸ªweiã€‚è¦æŸ¥çœ‹æœ‰å¤šå°‘ä¸ªä»¥å¤ªå¸ï¼Œå¯ä»¥ç”¨web3.fromWei()å°†è¿”å›å€¼æ¢ç®—æˆä»¥å¤ªå¸

##### 5ã€ç§æœ‰é“¾ç½‘ç»œå»ºç«‹èŠ‚ç‚¹é›†ç¾¤

1ã€å¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå‘½ä»¤è¡Œè¾“å…¥ï¼š

```
wenzildeiMac:private-chain-data wenzil$ geth --datadir data2 --networkid 1024 --ipcdisable --port 3002 --rpcport 9000 console
INFO [05-31|22:55:05] Maximum peer count                       ETH=25 LES=0 total=25
INFO [05-31|22:55:05] Starting peer-to-peer node               instance=Geth/v1.8.10-stable/darwin-amd64/go1.10.2
INFO [05-31|22:55:05] Allocated cache and file handles         database=/Users/wenzil/Desktop/study/private-chain-data/data2/geth/chaindata cache=768 handles=128
INFO [05-31|22:55:05] Writing default main-net genesis block 
INFO [05-31|22:55:06] Persisted trie from memory database      nodes=12356 size=2.34mB time=45.548308ms gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B
INFO [05-31|22:55:06] Initialised chain configuration          config="{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: <nil> Engine: ethash}"
INFO [05-31|22:55:06] Disk storage enabled for ethash caches   dir=/Users/wenzil/Desktop/study/private-chain-data/data2/geth/ethash count=3
INFO [05-31|22:55:06] Disk storage enabled for ethash DAGs     dir=/Users/wenzil/.ethash                                            count=2
INFO [05-31|22:55:06] Initialising Ethereum protocol           versions="[63 62]" network=1024
INFO [05-31|22:55:06] Loaded most recent local header          number=0 hash=d4e567â€¦cb8fa3 td=17179869184
INFO [05-31|22:55:06] Loaded most recent local full block      number=0 hash=d4e567â€¦cb8fa3 td=17179869184
INFO [05-31|22:55:06] Loaded most recent local fast block      number=0 hash=d4e567â€¦cb8fa3 td=17179869184
INFO [05-31|22:55:06] Regenerated local transaction journal    transactions=0 accounts=0
INFO [05-31|22:55:06] Starting P2P networking 
INFO [05-31|22:55:08] UDP listener up                          self=enode://9f22247630eb7f9cdf2ecbb4ca47f11b0f2d4d1a1d5d705eb2a74ebcd575b62bd6c177f35e695e25fbf4b6f2a895e1f91559336a0e6519d6fa120d2f11a0f9d2@100.64.79.21:3002
INFO [05-31|22:55:08] RLPx listener up                         self=enode://9f22247630eb7f9cdf2ecbb4ca47f11b0f2d4d1a1d5d705eb2a74ebcd575b62bd6c177f35e695e25fbf4b6f2a895e1f91559336a0e6519d6fa120d2f11a0f9d2@100.64.79.21:3002
INFO [05-31|22:55:08] Mapped network port                      proto=udp extport=3002 intport=3002 interface="UPNP IGDv1-IP1"
INFO [05-31|22:55:08] Mapped network port                      proto=tcp extport=3002 intport=3002 interface="UPNP IGDv1-IP1"
Welcome to the Geth JavaScript console!

instance: Geth/v1.8.10-stable/darwin-amd64/go1.10.2
 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0

```

2ã€å‘½ä»¤è¡Œè·å–èŠ‚ç‚¹å®ä¾‹Enoded urlï¼š

Enoded urlæ˜¯å’Œå¦å¤–ä¸€ä¸ªèŠ‚ç‚¹äº’åŠ¨çš„å”¯ä¸€idã€‚

```
> admin.nodeInfo.enode
"enode://9f22247630eb7f9cdf2ecbb4ca47f11b0f2d4d1a1d5d705eb2a74ebcd575b62bd6c177f35e695e25fbf4b6f2a895e1f91559336a0e6519d6fa120d2f11a0f9d2@100.64.79.21:3002"
> 
```

3ã€æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œåˆå§‹åŒ–ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼š

```
wenzildeiMac:private-chain-data wenzil$ geth --datadir data3 init ./genesis.json 
INFO [05-31|23:09:37] Maximum peer count                       ETH=25 LES=0 total=25
INFO [05-31|23:09:37] Allocated cache and file handles         database=/Users/wenzil/Desktop/study/private-chain-data/data3/geth/chaindata cache=16 handles=16
INFO [05-31|23:09:37] Writing custom genesis block 
INFO [05-31|23:09:37] Persisted trie from memory database      nodes=3 size=505.00B time=124.381Âµs gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B
INFO [05-31|23:09:37] Successfully wrote genesis state         database=chaindata                                                           hash=a3c5c1â€¦d6926b
INFO [05-31|23:09:37] Allocated cache and file handles         database=/Users/wenzil/Desktop/study/private-chain-data/data3/geth/lightchaindata cache=16 handles=16
INFO [05-31|23:09:37] Writing custom genesis block 
INFO [05-31|23:09:37] Persisted trie from memory database      nodes=3 size=505.00B time=44.996Âµs  gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B
INFO [05-31|23:09:37] Successfully wrote genesis state         database=lightchaindata                                                           hash=a3c5c1â€¦d6926b
```

4ã€å¯åŠ¨ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼š

å‘½ä»¤å¦‚ä¸‹

```
geth --datadir data3 --networkid 1024 --ipcdisable --port 3003 --rpcport 9001 --bootnodes "enode://9f22247630eb7f9cdf2ecbb4ca47f11b0f2d4d1a1d5d705eb2a74ebcd575b62bd6c177f35e695e25fbf4b6f2a895e1f91559336a0e6519d6fa120d2f11a0f9d2@100.64.79.21:3002" console
```

æ“ä½œç»“æœå¦‚ä¸‹

```
wenzildeiMac:private-chain-data wenzil$ geth --datadir data3 --networkid 1024 --ipcdisable --port 3003 --rpcport 9001 --bootnodes "enode://9f22247630eb7f9cdf2ecbb4ca47f11b0f2d4d1a1d5d705eb2a74ebcd575b62bd6c177f35e695e25fbf4b6f2a895e1f91559336a0e6519d6fa120d2f11a0f9d2@100.64.79.21:3002" console
INFO [05-31|23:12:16] Maximum peer count                       ETH=25 LES=0 total=25
INFO [05-31|23:12:16] Starting peer-to-peer node               instance=Geth/v1.8.10-stable/darwin-amd64/go1.10.2
INFO [05-31|23:12:16] Allocated cache and file handles         database=/Users/wenzil/Desktop/study/private-chain-data/data3/geth/chaindata cache=768 handles=128
INFO [05-31|23:12:16] Initialised chain configuration          config="{ChainID: 10 Homestead: 0 DAO: <nil> DAOSupport: false EIP150: <nil> EIP155: 0 EIP158: 0 Byzantium: <nil> Constantinople: <nil> Engine: unknown}"
INFO [05-31|23:12:16] Disk storage enabled for ethash caches   dir=/Users/wenzil/Desktop/study/private-chain-data/data3/geth/ethash count=3
INFO [05-31|23:12:16] Disk storage enabled for ethash DAGs     dir=/Users/wenzil/.ethash                                            count=2
INFO [05-31|23:12:16] Initialising Ethereum protocol           versions="[63 62]" network=1024
INFO [05-31|23:12:16] Loaded most recent local header          number=0 hash=a3c5c1â€¦d6926b td=131072
INFO [05-31|23:12:16] Loaded most recent local full block      number=0 hash=a3c5c1â€¦d6926b td=131072
INFO [05-31|23:12:16] Loaded most recent local fast block      number=0 hash=a3c5c1â€¦d6926b td=131072
INFO [05-31|23:12:16] Regenerated local transaction journal    transactions=0 accounts=0
INFO [05-31|23:12:16] Starting P2P networking 
INFO [05-31|23:12:19] UDP listener up                          self=enode://552048cffbbce418f53e74c5800f518a0773e737060e243757b32a74dd539c43342214fda593307bb87e42e16318e3e3dcc8aaa53f67620f50b94f85745288f7@100.64.79.21:3003
INFO [05-31|23:12:19] RLPx listener up                         self=enode://552048cffbbce418f53e74c5800f518a0773e737060e243757b32a74dd539c43342214fda593307bb87e42e16318e3e3dcc8aaa53f67620f50b94f85745288f7@100.64.79.21:3003
INFO [05-31|23:12:19] Mapped network port                      proto=udp extport=3003 intport=3003 interface="UPNP IGDv1-IP1"
INFO [05-31|23:12:19] Mapped network port                      proto=tcp extport=3003 intport=3003 interface="UPNP IGDv1-IP1"
Welcome to the Geth JavaScript console!

instance: Geth/v1.8.10-stable/darwin-amd64/go1.10.2
 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0

> 
```

--bootndoesçš„å€¼æ¥é“¾æ¥ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåé¢è·Ÿç€"admin.nodeInfo.enode"å¾—åˆ°çš„å€¼ã€‚ä¹Ÿå¯ä»¥å…ˆä¸è®¾ç½®--bootnodesï¼Œç›´æ¥å¯åŠ¨èŠ‚ç‚¹ï¼Œè¿›å…¥å‘½ä»¤è¡Œåé€šè¿‡admin.addPeer(enodeUrl)æ¥æ·»åŠ ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚

![2.åŒæ—¶æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯è¿è¡Œ](media/15277728467358/2.åŒæ—¶æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯.png)

5ã€ç¬¬äºŒä¸ªèŠ‚ç‚¹è¾“å…¥ï¼š

```
> admin.nodeInfo
{
  enode: "enode://552048cffbbce418f53e74c5800f518a0773e737060e243757b32a74dd539c43342214fda593307bb87e42e16318e3e3dcc8aaa53f67620f50b94f85745288f7@100.64.79.21:3003",
  id: "552048cffbbce418f53e74c5800f518a0773e737060e243757b32a74dd539c43342214fda593307bb87e42e16318e3e3dcc8aaa53f67620f50b94f85745288f7",
  ip: "100.64.79.21",
  listenAddr: "[::]:3003",
  name: "Geth/v1.8.10-stable/darwin-amd64/go1.10.2",
  ports: {
    discovery: 3003,
    listener: 3003
  },
  protocols: {
    eth: {
      config: {
        chainId: 10,
        eip150Hash: "0x0000000000000000000000000000000000000000000000000000000000000000",
        eip155Block: 0,
        eip158Block: 0,
        homesteadBlock: 0
      },
      difficulty: 131072,
      genesis: "0xa3c5c170988f516e00ea3078b2461a149bcd4d0422c8c894923c6cfa22d6926b",
      head: "0xa3c5c170988f516e00ea3078b2461a149bcd4d0422c8c894923c6cfa22d6926b",
      network: 1024
    }
  }
}
```

6ã€ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è¾“å…¥ï¼š

```
> web3.net.peerCount
1
> admin.peers
[{
    caps: ["eth/62", "eth/63"],
    id: "57802b43fe51c7356f429f07cf8f42e9c154a7b192b0d2f7a9b19be299f9e12fbcad9aac5f302127bc7c9a7a9f9f3d7cdaf07f9b4616ad5a23b060b70b3b2c9e",
    name: "Pirl/v1.8.1-premium-masternode-stablev3-824f23e3/linux-amd64/go1.10",
    network: {
      inbound: false,
      localAddress: "192.168.1.100:62505",
      remoteAddress: "195.201.134.19:30303",
      static: false,
      trusted: false
    },
    protocols: {
      eth: "handshake"
    }
}]
```

7ã€ç¬¬äºŒä¸ªèŠ‚ç‚¹è®¾ç½®æŒ–çŸ¿çš„è´¦æˆ·ï¼Œå¹¶è¿›è¡ŒæŒ–çŸ¿ï¼š

```
> eth.accounts
[]
###æ²¡æœ‰é»˜è®¤çš„è´¦æˆ·###
> web3.eth.getBalance("0x0000000000000000000000000000000000000001")
111111111
###æŸ¥çœ‹é…ç½®åˆ›ä¸–åŒºå—ä¿¡æ¯æ—¶è®¾ç½®çš„è´¦æˆ·ä½™é¢###
> miner.setEtherbase("0x0000000000000000000000000000000000000001")
true
###è®¾ç½®ä¸ºæŒ–çŸ¿çš„è´¦æˆ·###
> eth.getBalance(eth.coinbase)
111111111
###æŸ¥è¯¢è´¦æˆ·çš„ä½™é¢###
> personal.newAccount("wenzil")
"0x3f34992401fdd5c590be876d56e1d268f79c1635"
###æ–°å»ºä¸€ä¸ªè´¦æˆ·çš„ä½™é¢###
> eth.accounts
["0x3f34992401fdd5c590be876d56e1d268f79c1635"]
###æŸ¥è¯¢è´¦æˆ·åˆ—è¡¨###
> personal.listAccounts
["0x3f34992401fdd5c590be876d56e1d268f79c1635"]
###æŸ¥è¯¢è´¦æˆ·åˆ—è¡¨###
> miner.setEtherbase(personal.listAccounts[0])
true
###å°†æ–°å»ºçš„è´¦æˆ·è®¾ç½®ä¸ºæŒ–çŸ¿çš„è´¦æˆ·###
> eth.getBalance(eth.coinbase)
0
###æŸ¥è¯¢ä¸»ï¼ˆæŒ–çŸ¿ï¼‰è´¦æˆ·çš„ä½™é¢###
> miner.start()
###å¼€å§‹æŒ–çŸ¿###
INFO [06-01|00:54:42] Updated mining threads                   threads=0
INFO [06-01|00:54:42] Transaction pool price threshold updated price=18000000000
INFO [06-01|00:54:42] Starting mining operation 
null
> INFO [06-01|00:54:42] Commit new mining work                   number=1 txs=0 uncles=0 elapsed=169.586Âµs
INFO [06-01|00:54:43] Successfully sealed new block            number=1 hash=c24224â€¦898e08
INFO [06-01|00:54:43] ğŸ”¨ mined potential block                  number=1 hash=c24224â€¦898e08
##########æ­¤å¤„çœç•¥å¤šè¡Œè¾“å‡ºå†…å®¹##########
> INFO [06-01|00:57:13] Successfully sealed new block            number=66 hash=5e48f4â€¦18a817
INFO [06-01|00:57:13] ğŸ”— block reached canonical chain          number=61 hash=d614e1â€¦480f89
INFO [06-01|00:57:13] ğŸ”¨ mined potential block                  number=66 hash=5e48f4â€¦18a817
INFO [06-01|00:57:13] Commit new mining work                   number=67 txs=0 uncles=0 elapsed=515.958Âµs
> miner.stopINFO [06-01|00:57:17] Successfully sealed new block            number=67 hash=b278b3â€¦f57acc
INFO [06-01|00:57:17] ğŸ”— block reached canonical chain          number=62 hash=376431â€¦468501
INFO [06-01|00:57:17] ğŸ”¨ mined potential block                  number=67 hash=b278b3â€¦f57acc
INFO [06-01|00:57:17] Commit new mining work                   number=68 txs=0 uncles=0 elapsed=310.084Âµs
> miner.stop()
> true
###æŒ–ä¸€æ®µæ—¶é—´åï¼Œæ‰‹åŠ¨åœæ­¢æŒ–çŸ¿###
> eth.getBalance(eth.accounts[0])
335000000000000000000
> web3.fromWei(eth.getBalance(eth.accounts[0]).toNumber(), 'ether');
"335"
###æŒ–ä¸ª335ä¸ªä»¥å¤ªå¸###
```

8ã€æŸ¥çœ‹ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„è´¦æˆ·ä¿¡æ¯ï¼š

```
> eth.accounts
["0x2cbe966aa14f0c77336fd0539e60e0c6381211ce"]
> eth.getBalance(eth.accounts[0])
0
```

9ã€ç¬¬äºŒä¸ªèŠ‚ç‚¹å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è½¬è´¦ï¼š


```
> personal.unlockAccount(eth.accounts[0], "wenzil")
true
###è§£é”å¸å·ï¼Œå¯†ç ä¸ºåˆ›å»ºè´¦æˆ·æ—¶è¾“å…¥çš„è´¦æˆ·å###
> eth.sendTransaction({from: eth.accounts[0], to: "0x2cbe966aa14f0c77336fd0539e60e0c6381211ce", value: web3.toWei(1, "ether")})
INFO [06-01|01:19:32] Submitted transaction                    fullhash=0xd04debc8556a348761a5cedc991cf38a35cbc5cea2e112f61e29a47ef523b81c recipient=0x2cbe966AA14F0c77336fd0539E60E0c6381211ce
"0xd04debc8556a348761a5cedc991cf38a35cbc5cea2e112f61e29a47ef523b81c"
```

10ã€ç„¶åæŒ–çŸ¿ï¼ŒæˆåŠŸååœæ­¢ï¼Œè®©äº¤æ˜“ç”Ÿæ•ˆï¼š

```
> eth.pendingTransactions
[{
    blockHash: null,
    blockNumber: null,
    from: "0x3f34992401fdd5c590be876d56e1d268f79c1635",
    gas: 90000,
    gasPrice: 18000000000,
    hash: "0x321192cbb1e891fb811c8c9e5224446511cd6d8c9661da6a23d27a200a2821d4",
    input: "0x",
    nonce: 1,
    r: "0x37510e6782d9209ad6f9c63e29685cfcfc1c293af47d7e9825201902dad5a211",
    s: "0x424b76ee28e5ea67ca0d8dded840be4b62c97482183bd11bb13c518d0622c107",
    to: "0x2cbe966aa14f0c77336fd0539e60e0c6381211ce",
    transactionIndex: 0,
    v: "0x37",
    value: 1000000000000000000
}]
> miner.start()
INFO [06-01|01:57:51] Updated mining threads                   threads=0
INFO [06-01|01:57:51] Transaction pool price threshold updated price=18000000000
INFO [06-01|01:57:51] Starting mining operation 

##########æ­¤å¤„çœç•¥å¤šè¡Œè¾“å‡ºå†…å®¹##########

> miner.stop()
> true
> eth.pendingTransactions
[]
```

11ã€ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æŸ¥çœ‹ä½™é¢ï¼š

```
> eth.getBalance(eth.accounts[0])
1000000000000000000
```

ç¬¬5èŠ‚çš„â€ç§æœ‰é“¾ç½‘ç»œå»ºç«‹èŠ‚ç‚¹é›†ç¾¤â€œåŸºæœ¬å‚è€ƒå¦‚ä¸‹äº†ç½‘å€ã€‚
ç½‘å€ï¼šhttps://www.cnblogs.com/zl03jsj/p/6876064.html

